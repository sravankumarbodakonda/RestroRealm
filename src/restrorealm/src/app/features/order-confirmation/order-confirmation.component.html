<div class="order-confirmation-container" #receiptContent>
  <!-- Enhanced Toast Notification -->
  <div class="toast-container" *ngIf="toastVisible">
    <div class="toast" [ngClass]="toastType">
      <svg *ngIf="toastType === 'success'" class="toast-icon" viewBox="0 0 24 24">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
      </svg>
      <svg *ngIf="toastType === 'error'" class="toast-icon" viewBox="0 0 24 24">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
      </svg>
      <div class="toast-message">{{ toastMessage }}</div>
      <button class="toast-close" (click)="closeToast()">×</button>
    </div>
  </div>

  <!-- Enhanced Loading State -->
  <div *ngIf="isLoading" class="loading-overlay">
    <div class="spinner-container">
      <div class="spinner"></div>
    </div>
    <p class="loading-text">Preparing your culinary experience...</p>
    <p class="loading-subtext">Your delicious journey is about to begin</p>
  </div>

  <!-- Order Confirmation Content -->
  <ng-container *ngIf="!isLoading">
    <!-- Enhanced Header Section -->
    <div class="confirmation-header">
      <!-- <div class="logo-container">
        <div class="logo">
          <img [src]="logoUrl" alt="RestroRealm Logo">
        </div>
      </div> -->
      <div class="success-indicator">
        <div class="success-checkmark">
          <div class="check-icon">
            <span class="icon-line line-tip"></span>
            <span class="icon-line line-long"></span>
            <div class="icon-circle"></div>
            <div class="icon-fix"></div>
          </div>
        </div>
      </div>
      <h1 class="confirmation-title">Your Culinary Adventure Awaits!</h1>
      <p class="confirmation-subtitle">We're crafting your gourmet experience with care and passion.</p>
      <div class="order-number">Order #{{ order.orderNumber }}</div>
      <div class="estimated-time">
        <svg class="time-icon" viewBox="0 0 24 24">
          <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
          <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
        </svg>
        <span>Estimated delivery: {{ estimatedDeliveryTime | date:'shortTime' }}</span>
      </div>
    </div>

    <!-- Enhanced Order Progress -->
    <div class="order-progress-container">
      <div class="progress-background"></div>
      <div class="progress-step completed">
        <div class="step-icon-container">
          <svg class="step-icon" viewBox="0 0 24 24">
            <path d="M17 18c-1.1 0-1.99.9-1.99 2S15.9 22 17 22s2-.9 2-2-.9-2-2-2zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM7.17 14.75l-.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z"/>
          </svg>
        </div>
        <div class="step-label">Cart</div>
        <div class="step-line"></div>
      </div>
      <div class="progress-step completed">
        <div class="step-icon-container">
          <svg class="step-icon" viewBox="0 0 24 24">
            <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
        </div>
        <div class="step-label">Checkout</div>
        <div class="step-line"></div>
      </div>
      <div class="progress-step completed">
        <div class="step-icon-container">
          <svg class="step-icon" viewBox="0 0 24 24">
            <path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/>
          </svg>
        </div>
        <div class="step-label">Payment</div>
        <div class="step-line"></div>
      </div>
      <div class="progress-step current">
        <div class="step-icon-container">
          <svg class="step-icon" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
        </div>
        <div class="step-label">Confirmed</div>
        <div class="step-line"></div>
      </div>
      <div class="progress-step">
        <div class="step-icon-container">
          <svg class="step-icon" viewBox="0 0 24 24">
            <path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
            <path d="M12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
          </svg>
        </div>
        <div class="step-label">Delivered</div>
      </div>
    </div>

    <!-- Banner Message -->
    <div class="banner-message">
      <svg class="banner-icon" viewBox="0 0 24 24">
        <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/>
      </svg>
      <div class="banner-content">
        <p class="banner-title">Your order is being prepared with care!</p>
        <p class="banner-text">Our chefs are working their magic. We'll notify you with updates.</p>
      </div>
    </div>

    <!-- Enhanced Order Details Section -->
    <div class="order-details-container">
      <div class="order-details-grid">
        <div class="order-details-card customer-details">
          <div class="card-header">
            <svg class="card-icon" viewBox="0 0 24 24">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            <h2 class="card-title">Your Details</h2>
          </div>
          <div class="card-content">
            <div class="detail-row">
              <span class="detail-label">Name:</span>
              <span class="detail-value">{{ order.customerName }}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Email:</span>
              <span class="detail-value">{{ order.customerEmail }}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Phone:</span>
              <span class="detail-value">{{ order.customerPhone }}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Order Date:</span>
              <span class="detail-value">{{ order.createdAt | date:'medium' }}</span>
            </div>
          </div>
        </div>

        <div class="order-details-card delivery-details">
          <div class="card-header">
            <svg class="card-icon" viewBox="0 0 24 24">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
            <h2 class="card-title">Delivery Information</h2>
          </div>
          <div class="card-content">
            <div class="detail-row">
              <span class="detail-label">Address:</span>
              <span class="detail-value">{{ deliveryAddress }}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Estimated:</span>
              <span class="detail-value highlight-time">{{ estimatedDeliveryTime | date:'medium' }}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Payment:</span>
              <span class="detail-value">{{ order.paymentMethod | titlecase }}</span>
            </div>
            <div class="detail-row" *ngIf="order.deliveryInstructions">
              <span class="detail-label">Special Instructions:</span>
              <span class="detail-value special-instructions">{{ order.deliveryInstructions }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Enhanced Order Items Section -->
      <div class="order-items-container">
        <div class="order-details-card">
          <div class="card-header">
            <svg class="card-icon" viewBox="0 0 24 24">
              <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
            </svg>
            <h2 class="card-title">Your Culinary Selection</h2>
          </div>
          <div class="card-content">
            <div class="items-list">
              <div class="item-row" *ngFor="let item of order.orderItems">
                <div class="item-info">
                  <div class="item-image" [ngClass]="{'has-image': item?.menuItem?.imageUrl}">
                    <div class="item-initial" *ngIf="!item?.menuItem?.imageUrl">{{ item.menuItemName?.charAt(0) || 'I' }}</div>
                    <img *ngIf="item?.menuItem?.imageUrl" [src]="item.menuItem.imageUrl" [alt]="item.menuItemName">
                  </div>
                  <div class="item-details">
                    <div class="item-name">{{ item.menuItemName }}</div>
                    <div class="item-meta">
                      <span class="item-quantity">{{ item.quantity }} × </span>
                      <span class="item-unit-price">${{ item.price | number:'1.2-2' }}</span>
                    </div>
                    <div class="item-special-instructions" *ngIf="item.specialInstructions">
                      <svg class="note-icon" viewBox="0 0 24 24">
                        <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                      </svg>
                      <span>{{ item.specialInstructions }}</span>
                    </div>
                  </div>
                </div>
                <div class="item-price">${{ (item.quantity * item.price) | number:'1.2-2' }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Enhanced Order Summary -->
      <div class="order-summary-container">
        <div class="order-details-card">
          <div class="card-header">
            <svg class="card-icon" viewBox="0 0 24 24">
              <path d="M11 17h2v-1h1c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1h-3v-1h4V8h-2V7h-2v1h-1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3v1H9v2h2v1zm9-13H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4V6h16v12z"/>
            </svg>
            <h2 class="card-title">Order Summary</h2>
          </div>
          <div class="card-content">
            <div class="summary-row" *ngIf="order.subtotal">
              <span>Food Subtotal</span>
              <span>${{ order.subtotal | number:'1.2-2' }}</span>
            </div>
            <div class="summary-row" *ngIf="order.taxAmount">
              <span>Tax</span>
              <span>${{ order.taxAmount | number:'1.2-2' }}</span>
            </div>
            <div class="summary-row" *ngIf="order.deliveryFee">
              <span>Delivery Fee</span>
              <span>${{ order.deliveryFee | number:'1.2-2' }}</span>
            </div>
            <div class="summary-row discount" *ngIf="order.discount">
              <span>Discount Applied</span>
              <span>-${{ order.discount | number:'1.2-2' }}</span>
            </div>
            <div class="summary-row total">
              <span>Total</span>
              <span>${{ order.totalAmount | number:'1.2-2' }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Enhanced Actions Section -->
    <div class="actions-container">
      <button class="action-button receipt" (click)="downloadReceipt()" [disabled]="isGeneratingReceipt">
        <div class="action-button-content">
          <div class="action-icon-container">
            <svg *ngIf="!isGeneratingReceipt" class="action-icon" viewBox="0 0 24 24">
              <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
            </svg>
            <div *ngIf="isGeneratingReceipt" class="button-spinner"></div>
          </div>
          <div class="action-text">
            <span class="action-title">{{ isGeneratingReceipt ? 'Generating...' : 'Download Receipt' }}</span>
            <span class="action-description">Save for your records</span>
          </div>
        </div>
      </button>

      <button class="action-button share" (click)="shareOrder()">
        <div class="action-button-content">
          <div class="action-icon-container">
            <svg class="action-icon" viewBox="0 0 24 24">
              <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
            </svg>
          </div>
          <div class="action-text">
            <span class="action-title">Share Order</span>
            <span class="action-description">Let friends know what's coming</span>
          </div>
        </div>
      </button>

      <a class="action-button continue" routerLink="/menu">
        <div class="action-button-content">
          <div class="action-icon-container">
            <svg class="action-icon" viewBox="0 0 24 24">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
          </div>
          <div class="action-text">
            <span class="action-title">Browse More Dishes</span>
            <span class="action-description">Explore our gourmet menu</span>
          </div>
        </div>
      </a>
    </div>

    <!-- Promotional Banner -->
    <div class="promo-banner">
      <div class="promo-content">
        <div class="promo-icon">
          <svg viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
        </div>
        <div class="promo-text">
          <h3>Unlock 15% Off Your Next Order</h3>
          <p>Use code <strong>THANKYOU15</strong> at checkout</p>
        </div>
      </div>
    </div>

    <!-- Enhanced Footer -->
    <!-- <div class="footer-container">
      <div class="notification-message">
        <svg class="notification-icon" viewBox="0 0 24 24">
          <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/>
        </svg>
        <span>We'll notify you when your order is on its way!</span>
      </div>
      
      <div class="social-links">
        <a href="#" class="social-link">
          <svg viewBox="0 0 24 24">
            <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm3 8h-1.5c-.3 0-.5.2-.5.5v1h2l-.5 2h-1.5v5h-2v-5H9v-2h2v-1c0-1.9 1.1-3 3-3h1v2z"/>
          </svg>
        </a>
        <a href="#" class="social-link">
          <svg viewBox="0 0 24 24">
            <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
          </svg>
        </a>
        <a href="#" class="social-link">
          <svg viewBox="0 0 24 24">
            <path d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2zm-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6zm9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25zM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 2a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"/>
          </svg>
        </a>
      </div>
      
      <div class="footer-links">
        <a href="#" class="footer-link">About Us</a>
        <a href="#" class="footer-link">Our Menu</a>
        <a href="#" class="footer-link">Contact</a>
        <a href="#" class="footer-link">Privacy Policy</a>
        <a href="#" class="footer-link">Terms of Service</a>
      </div>
      
      <div class="copyright">
        <p>© {{ currentYear }} RestroRealm. All flavors reserved.</p>
        <p class="tagline">Crafting culinary experiences worth remembering</p>
      </div>
    </div> -->
  </ng-container>
</div>
